<?xml version="1.0"?>

<st-source>
<time-stamp>From VisualWorksÂ® NonCommercial, 7.6 of lundi 3 mars 2008 on mardi 22 septembre 2020 at 9:18:32</time-stamp>
<!-- Package CormasCovid* -->


<name-space>
<name>CormasCovid</name>
<environment>CormasNS.Models</environment>
<private>false</private>
<imports>
			private Smalltalk.*
			private CormasNS.Kernel.*
			</imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</name-space>

<class>
<name>School</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.SpatialEntityAggregate</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars></inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>IsolationPlace</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.SpatialEntityAggregate</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars></inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>Cell</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.SpatialEntityCell</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars></inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>CormasCovid</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.CormasModel</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars>theCells theSchools theWorkingPlaces theIsolationPlaces theHouses theIndividuals numOfIndividuals </inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>WorkingPlace</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.SpatialEntityAggregate</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars></inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>House</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.SpatialEntityAggregate</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars></inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>

<class>
<name>Individual</name>
<environment>CormasNS.Models.CormasCovid</environment>
<super>CormasNS.Kernel.AgentLocation</super>
<private>false</private>
<indexed-type>none</indexed-type>
<inst-vars>house </inst-vars>
<class-inst-vars></class-inst-vars>
<imports></imports>
<category>CormasCovidCategory</category>
<attributes>
<package>CormasCovid</package>
</attributes>
</class>









<methods>
<class-id>CormasNS.Models.CormasCovid.Individual class</class-id> <category>+ parameter unit</category>

<body package="CormasCovid">house_type 
	"Return the type of attribute #house.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^UndefinedObject</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.Individual class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.Individual class</class-id> <category>- default value</category>

<body package="CormasCovid">house_default 
	"Return the default value of attribute #house : nil.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^nil</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.Individual class</class-id> <category>pov symbols</category>

<body package="CormasCovid">defaultColor 
"Returns the default color (Automatically defined by Cormas)." 
^(ColorValue red: 0.0999878 green: 1.0 blue: 0.0999878)</body>

<body package="CormasCovid">VectorialPOV_Individual
"Returns an array containing the settings of a Situated entity vectorial pov symbol in the following order:
(color red) (color green) (color blue) (lineColor red) (lineColor green) (lineColor blue) lineWidth sizeratio position (array of outline vertices) isDistortable." 
^#(0.0999878 1.0 0.0999878 0.0 0.0 0.0 1 1 #random #(4.45856e-7@-10.2 8.83346@-5.1 8.83346@5.1 -1.21634e-7@10.2 -8.83346@5.1 -8.83346@-5.1 3.44522e-6@-10.2) true)</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.Individual</class-id> <category>accessing</category>

<body package="CormasCovid">house: aUndefinedObject 
	"Setter accessor of attribute house	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!  "
	house := aUndefinedObject</body>

<body package="CormasCovid">house
	"Getter accessor without initial value "
	^house</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid class</class-id> <category>+ parameter unit</category>

<body package="CormasCovid">numOfIndividuals_unit 
	"Return the unit of attribute #numOfIndividuals.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^ ''</body>

<body package="CormasCovid">numOfIndividuals_type 
	"Return the type of attribute #numOfIndividuals.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^SmallInteger</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid class</class-id> <category>description</category>

<body package="CormasCovid">creationDate
^ 'mardi 22 septembre 2020'</body>

<body package="CormasCovid">version
^ 'CormasCovid.st'</body>

<body package="CormasCovid">currentDeveloperName
^ 'MissAbms2020'</body>

<body package="CormasCovid">cormasCompatibleVersion
^ #(2020 7 13 16 9 44)</body>

<body package="CormasCovid">versionComments
^ ' 

 --------------------- CormasCovid.st --------------------- Date: 2020.3.31
Firs model saving
 *** Developer: MissAbms2020 ***

 --------------------- CormasCovid.st --------------------- Date: 2020.8.11

 *** Developer: MissAbms2020 ***

 --------------------- CormasCovid.st --------------------- Date: 2020.8.11

 *** Developer: MissAbms2020 ***

 --------------------- CormasCovid.st --------------------- Date: 2020.7.13
From course 2: Create the grid, the Aggregates and the Individuals 
 *** Developer: MissAbms2020 ***'</body>

<body package="CormasCovid">emails
^ '"miss-abms trainers" &lt;miss-abms_trainers@agropolis.fr&gt;'</body>

<body package="CormasCovid">vwCompatibleVersion
^ '7.6'</body>

<body package="CormasCovid">authors
^ 'MissAbms2020'</body>

<body package="CormasCovid">lastUpdate
^ 'mardi 22 septembre 2020'</body>

<body package="CormasCovid">comments
^ 'See github repository: https://github.com/MISS-ABMS/CormasCovid'</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid class</class-id> <category>- default value</category>

<body package="CormasCovid">numOfIndividuals_default 
	"Return the default value of attribute #numOfIndividuals : 100.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^100</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid</class-id> <category>accessing</category>

<body package="CormasCovid">theSchools
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theSchools ifNil:[theSchools := IndexedSet new]</body>

<body package="CormasCovid">theCells
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theCells ifNil:[theCells := IndexedSet new]</body>

<body package="CormasCovid">theIsolationPlaces: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theIsolationPlaces := aNewCollection</body>

<body package="CormasCovid">theIndividuals
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theIndividuals ifNil:[theIndividuals := IndexedSet new]</body>

<body package="CormasCovid">theHouses: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theHouses := aNewCollection</body>

<body package="CormasCovid">numOfIndividuals: aSmallInteger 
	"Setter accessor of attribute numOfIndividuals	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!  "
	numOfIndividuals := aSmallInteger</body>

<body package="CormasCovid">theHouses
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theHouses ifNil:[theHouses := IndexedSet new]</body>

<body package="CormasCovid">theSchools: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theSchools := aNewCollection</body>

<body package="CormasCovid">theWorkingPlaces: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theWorkingPlaces := aNewCollection</body>

<body package="CormasCovid">theIndividuals: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theIndividuals := aNewCollection</body>

<body package="CormasCovid">theIsolationPlaces
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theIsolationPlaces ifNil:[theIsolationPlaces := IndexedSet new]</body>

<body package="CormasCovid">theWorkingPlaces
	"Returns a collection of all the instances of the sub classes collected by cormasModel.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"


^theWorkingPlaces ifNil:[theWorkingPlaces := IndexedSet new]</body>

<body package="CormasCovid">theCells: aNewCollection
	"Set a new collection for theXXXs attribute.
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	theCells := aNewCollection</body>

<body package="CormasCovid">numOfIndividuals
	"Getter accessor with initial value = 100. 
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !! "
	^numOfIndividuals ifNil:[numOfIndividuals := 100]</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid</class-id> <category>instance-creation</category>

<body package="CormasCovid">initAgents
	| newIndividual selectedHouse |

	self numOfIndividuals
		timesRepeat:
			[newIndividual := self newEntity: Individual.
			selectedHouse := Cormas
				selectRandomlyFrom:
					(self theHouses select: [:h | h allOccupants size &lt; 4]).
			newIndividual house: selectedHouse.
			newIndividual moveTo: selectedHouse components first]</body>

<body package="CormasCovid">initSpace
	self createGridNeighbourhood: 8 closed: true fromMatrixCsvFile: 'step-by-step-coding_spatial-grid.csv' attribute: 'state'.
	self createAggregates: School from: Cell verifying: [:aCell | aCell state = 'S'].
	self createAggregates: WorkingPlace from: Cell verifying: [:aCell | aCell state = 'W'].
	self createAggregates: IsolationPlace from: Cell verifying: [:aCell | aCell state = 'I'].
	self createAggregates: House from: Cell verifying: [:aCell | aCell state = 'H'].</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid</class-id> <category>init</category>

<body package="CormasCovid">init
"1. initializes a spatial grid made of 30 by 30 cells.
2. Creates the aggregates (Houses, Schools, Working places, Isolation places.
3. Creates the Individuals"
	self initSpace.
	self initAgents</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.CormasCovid</class-id> <category>control</category>

<body package="CormasCovid">step: t
"To be completed"</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.IsolationPlace class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.House class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.Cell class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.Cell class</class-id> <category>- default value</category>

<body package="CormasCovid">state_default 
	"Return the default value of attribute #state : nil.	
	This method was automatically generated by Cormas.
	!! BECAREFUL, You should not modify this method as it can be generated again when changing the value (Sensitivity Analysis for ex) !!"

	^nil</body>
</methods>

<methods>
<class-id>CormasNS.Models.CormasCovid.Cell class</class-id> <category>pov symbols</category>

<body package="CormasCovid">SpatialEntityPOV_I
"Returns an array containing the settings of a Spatial entity pov symbol in the following order:
(color red) (color green) (color blue)
(Automatically defined by Cormas)."
^Array with: 1.0 with: 0.309974 with: 0.0</body>

<body package="CormasCovid">SpatialEntityPOV_statenil
"Returns an array containing the settings of a Spatial entity pov symbol in the following order:
(color red) (color green) (color blue)
(Automatically defined by Cormas)."
^Array with: 1.0 with: 1.0 with: 1.0</body>

<body package="CormasCovid">SpatialEntityPOV_W
"Returns an array containing the settings of a Spatial entity pov symbol in the following order:
(color red) (color green) (color blue)
(Automatically defined by Cormas)."
^Array with: 1.0 with: 0.0 with: 1.0</body>

<body package="CormasCovid">SpatialEntityPOV_H
"Returns an array containing the settings of a Spatial entity pov symbol in the following order:
(color red) (color green) (color blue)
(Automatically defined by Cormas)."
^Array with: 0.680015 with: 0.680015 with: 0.680015</body>

<body package="CormasCovid">SpatialEntityPOV_S
"Returns an array containing the settings of a Spatial entity pov symbol in the following order:
(color red) (color green) (color blue)
(Automatically defined by Cormas)."
^Array with: 0.0 with: 1.0 with: 1.0</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.Cell</class-id> <category>* pov</category>

<body package="CormasCovid">povState
"return the value of the attribute
if the value is a string, converts it to a symbol
if the value is a number, converts it to a symbol, precede by the word state"
	self state isString ifTrue:[^self state asSymbol].
	self state isLiteral ifTrue:[^ ('state' , self state printString) asSymbol].
	^self state</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.School class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>


<methods>
<class-id>CormasNS.Models.CormasCovid.WorkingPlace class</class-id> <category>testing</category>

<body package="CormasCovid">isAbstract 
^false</body>
</methods>




</st-source>
